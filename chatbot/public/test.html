<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SAP-style Chat UI</title>
  <style>
    /* --------- Design tokens --------- */
    :root{
      --bg: #eef3fa;                 /* page background */
      --panel: #ffffff;              /* cards/panels */
      --brand: #0a6ed1;              /* SAP-ish blue */
      --muted: #8a94a6;
      --line: #e3e8f0;
      --chat-bg: #dfe8f6;            /* chat canvas */
      --ai: #ffffff;                 /* AI bubble */
      --user: #f7fafc;               /* User bubble */
      --shadow: 0 10px 30px rgba(20, 30, 60, .08);
      --radius-lg: 14px;
      --radius-xl: 20px;
      --sidebar-w: 300px;
      --sidebar-w-compact: 76px;
    }

    /* --------- Base layout --------- */
    html, body { height: 100%; }
    body{
      margin:0;
      font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:#1f2937;
      background:var(--bg);
      overflow:hidden; /* lock to canvas */
    }

    /* Optional fixed 1920x1080 frame. Remove to use full viewport only. */
    .frame{
      width: 100vw;
      height: 100vh;
      margin: 0;
      box-sizing: border-box;
      background: var(--panel);
      box-shadow: var(--shadow);
      border-radius: 16px;
      overflow: hidden;
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      grid-template-rows: 100%;
      transition: grid-template-columns .28s ease;
    }
    .frame.compact{
      grid-template-columns: var(--sidebar-w-compact) 1fr;
    }

    /* --------- Sidebar --------- */
    .sidebar{
      background:#ffffff;
      border-right:1px solid var(--line);
      display:flex;
      flex-direction:column;
      gap: 16px;
      padding: 18px 16px;
      transition: width .28s ease, padding .28s ease;
    }
    .frame.compact .sidebar{
      width: var(--sidebar-w-compact);
      padding: 18px 10px;
      align-items:center;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
    }
    .hamburger{
      width:38px;height:38px;border-radius:10px;border:1px solid var(--line);
      display:grid;place-items:center;background:#fff;cursor:pointer;
    }
    .hamburger svg{width:18px;height:18px}

    .saplogo{
      width: 58px; 
      height: 24px;
      display: block;
    }

    .search{
      display:flex;align-items:center;gap:10px;
      background:#f6f7fb;border:1px solid var(--line);
      border-radius: 10px;padding:10px 12px;
    }
    .search input{
      border:0;outline:0;background:transparent;width:100%;
    }
    .section-title{
      color:var(--muted);font-weight:600;font-size:12px;margin:2px 2px 4px;
      text-transform:uppercase;letter-spacing:.04em;
    }
    .history{
      display:flex;flex-direction:column;gap:10px;overflow:auto;min-height:0;
    }
    .history .item{
      display:flex;gap:10px;align-items:flex-start;padding:10px 12px;border-radius:12px;
      border:1px solid var(--line);cursor:pointer;background:#fff;
    }
    .history .item:hover{ box-shadow: var(--shadow); }
    .item .dot{width:10px;height:10px;border-radius:99px;background:#e5eefb;margin-top:5px}
    .item .title{font-weight:600}
    .item .sub{color:var(--muted);font-size:12px;margin-top:2px}

    .settings{
      margin-top:auto;
      display:flex;gap:10px;align-items:center;padding:10px 12px;border-radius:12px;
      border:1px solid var(--line);background:#fff;cursor:pointer;
    }

    /* Compact state text-hiding */
    .frame.compact .text-hide{ display:none; }
    .frame:not(.compact) .only-compact{ display:none; }

    /* --------- Chat side --------- */
    .chat{
      background: var(--chat-bg);
      display:flex;flex-direction:column;height:100%;
      position:relative;
    }

    /* Chat canvas (scrollable) */
    .messages{
      position:relative;
      padding: 26px 28px 140px; /* bottom reserved for input */
      overflow:auto; flex: 1 1 auto; min-height:0;
    }

    .bubble{
      max-width: 780px;
      background: var(--ai);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 16px;
      padding: 14px 16px;
      margin: 12px 0;
      box-shadow: 0 1px 0 rgba(0,0,0,.03);
    }
    .bubble.user{
      margin-left:auto;
      background: var(--user);
    }
    .bubble .meta{
      display:flex;gap:8px;align-items:center;margin-bottom:6px;
      color:var(--muted);font-size:12px;font-weight:600;letter-spacing:.02em;
    }
    .bubble .meta .role{
      color:#334155;
    }

    /* Input dock */
    .composer{
      position:absolute; left:0; right:0; bottom:0;
      padding: 16px 26px 26px;
      background:linear-gradient(180deg, rgba(223,232,246,0) 0%, rgba(223,232,246,.7) 40%, rgba(223,232,246,1) 100%);
      display:flex;justify-content:center;
    }
    .composer .inner{
      background:#fff;border:1px solid var(--line);
      border-radius: 16px; width:min(1200px, 92%);
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      box-shadow:var(--shadow);
    }
    .iconbtn{
      width:40px;height:40px;border-radius:10px;border:1px solid var(--line);
      display:grid;place-items:center;background:#fff;cursor:pointer;flex:0 0 auto;
    }
    .input{
      flex:1 1 auto; min-width:0;
    }
    .input textarea{
      width:100%; max-height:140px; min-height:28px; height:28px; resize:none;
      border:0; outline:0; font: inherit; line-height:1.35; padding:8px 2px;
    }
    .send{
      background: var(--brand); color:#fff; border-color: transparent;
    }
    .send:hover{ filter:brightness(.96); }
    .kbd{
      background:#f1f5f9;border:1px solid var(--line); padding:2px 6px;border-radius:8px;color:var(--muted);font-size:12px;
    }

    /* Scrollbar (subtle) */
    *::-webkit-scrollbar{ width:10px; height:10px; }
    *::-webkit-scrollbar-thumb{ background:#c8d4e6; border-radius:10px; border:2px solid transparent; background-clip:content-box;}
    *{ scrollbar-color:#c8d4e6 transparent; }

    /* Small screens fallback */
    @media (max-width: 1280px){
      .frame{ width:100vw; height:100vh; border-radius:0;}
    }

    /* ==== Compact sidebar: show ONLY the hamburger ==== */

    /* Sidebar layout in compact mode */
    .frame.compact .sidebar{
    padding: 18px 0;                 /* no side padding so the button is truly centered */
    display: flex;
    flex-direction: column;
    align-items: center;             /* center horizontally */
    justify-content: flex-start;     /* keep at top; change to center if you want middle */
    gap: 0;                          /* remove vertical gaps that could leave “ghost” space */
    }

    /* Hide all direct children except .brand (which contains the hamburger) */
    .frame.compact .sidebar > :not(.brand){
    display: none !important;
    }

    /* Inside .brand, show only the hamburger button */
    .frame.compact .brand{
    width: 100%;
    display: flex;
    justify-content: center;
    }
    .frame.compact .brand > :not(.hamburger){
    display: none !important;
    }

    /* Hamburger: fixed square, perfectly centered */
    .frame.compact .hamburger{
    width: 44px;
    height: 44px;
    margin: 0;
    display: grid;
    place-items: center;
    }

    /* Safety: kill any decorative pseudo-elements that might still draw shapes */
    .frame.compact .sidebar *::before,
    .frame.compact .sidebar *::after{
    content: none !important;
    }


  </style>
</head>
<body>

  <div class="frame" id="frame">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <button class="hamburger" id="toggle">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>
        <img src="/chatbot/images/saplogo.png" alt="SAP" class="saplogo">
      </div>

      <div class="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2">
          <circle cx="11" cy="11" r="7"/><path d="M21 21l-4.3-4.3"/>
        </svg>
        <input placeholder="Search" class="text-hide" />
      </div>

      <div class="section-title text-hide">History</div>
      <div class="history">
        <div class="item">
          <span class="dot only-compact"></span>
          <div class="text-hide">
            <div class="title">How to download Python</div>
            <div class="sub">A quick step-by-step for Windows & macOS</div>
          </div>
        </div>
        <div class="item">
          <span class="dot only-compact"></span>
          <div class="text-hide">
            <div class="title">Best practices I should…</div>
            <div class="sub">Linting, venvs, and formatting</div>
          </div>
        </div>
        <div class="item">
          <span class="dot only-compact"></span>
          <div class="text-hide">
            <div class="title">Where can I access the powerpo…</div>
            <div class="sub">Shared drive + permission tips</div>
          </div>
        </div>
      </div>

      <div class="settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2">
          <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"/>
          <path d="M19.4 15a1.7 1.7 0 0 0 .34 1.88l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06A1.7 1.7 0 0 0 15 19.4a1.7 1.7 0 0 0-1 .6l-.06.06a2 2 0 1 1-3 0l-.06-.06a1.7 1.7 0 0 0-1-.6 1.7 1.7 0 0 0-1.88-.34l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.7 1.7 0 0 0 4.6 15a1.7 1.7 0 0 0-.6-1l-.06-.06a2 2 0 1 1 0-3l.06-.06a1.7 1.7 0 0 0 .6-1 1.7 1.7 0 0 0-.34-1.88l-.06-.06A2 2 0 1 1 6.93 3.1l.06.06A1.7 1.7 0 0 0 8 3.6a1.7 1.7 0 0 0 1-.6l.06-.06a2 2 0 1 1 3 0l.06.06a1.7 1.7 0 0 0 1 .6 1.7 1.7 0 0 0 1.88.34l.06-.06A2 2 0 1 1 20.9 6.93l-.06.06a1.7 1.7 0 0 0-.6 1 1.7 1.7 0 0 0 .34 1.88l.06.06a2 2 0 1 1 0 3l-.06.06a1.7 1.7 0 0 0-.6 1Z"/>
        </svg>
        <span class="text-hide">Settings</span>
      </div>
    </aside>

    <!-- Chat area -->
    <main class="chat">
      <div class="messages" id="messages">
        <div class="bubble">
          <div class="meta"><span class="role">AI</span> · Welcome</div>
          <div>Hello! Ask me anything. This mock UI includes a collapsible sidebar, a scrollable chat canvas, and a composer dock below.</div>
        </div>

        <div class="bubble user">
          <div class="meta"><span class="role">You</span> · Example</div>
          <div>How do I download Python?</div>
        </div>

        <div class="bubble">
          <div class="meta"><span class="role">AI</span></div>
          <div>Visit python.org → Downloads, grab the installer for your OS, then follow the prompts (on Windows, tick “Add python.exe to PATH”).</div>
        </div>
      </div>

      <!-- Composer -->
      <div class="composer">
        <div class="inner">
          <button class="iconbtn" title="Attach">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15.5V7a5 5 0 0 0-10 0v10a3 3 0 1 0 6 0V8"/>
            </svg>
          </button>
          <div class="input">
            <textarea id="input" placeholder="Ask me anything"></textarea>
          </div>
          <span class="kbd only-compact">Enter</span>
          <button class="iconbtn send" id="send" title="Send (Enter)">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7Z"/>
            </svg>
          </button>
        </div>
      </div>
    </main>
  </div>

  <script>
    // Sidebar toggle
    const frame = document.getElementById('frame');
    document.getElementById('toggle').addEventListener('click', () => {
      frame.classList.toggle('compact');
    });

    // Auto-grow textarea and basic “AI” echo
    const ta = document.getElementById('input');
    const messages = document.getElementById('messages');
    const sendBtn = document.getElementById('send');

    function autogrow(el){
      el.style.height = '28px';
      el.style.height = Math.min(el.scrollHeight, 140) + 'px';
    }
    ta.addEventListener('input', () => autogrow(ta));

    function scrollToBottom(){
      messages.scrollTop = messages.scrollHeight;
    }

    function addBubble(role, text){
      const div = document.createElement('div');
      div.className = 'bubble' + (role === 'You' ? ' user' : '');
      div.innerHTML = `<div class="meta"><span class="role">${role}</span></div><div>${text}</div>`;
      messages.appendChild(div);
      scrollToBottom();
    }

    function addTyping(){
      const d = document.createElement('div');
      d.className = 'bubble';
      d.dataset.typing = '1';
      d.innerHTML = `<div class="meta"><span class="role">AI</span></div>
        <div><span class="dots">Typing<span class="dot1">.</span><span class="dot2">.</span><span class="dot3">.</span></span></div>`;
      messages.appendChild(d);
      scrollToBottom();
      return d;
    }

    function send(){
      const text = ta.value.trim();
      if(!text) return;
      addBubble('You', text);
      ta.value=''; autogrow(ta);

      const typing = addTyping();

      // Fake AI response (replace with your API call)
      setTimeout(() => {
        typing.remove();
        const reply = "You said: “" + text.replace(/</g,'&lt;').replace(/>/g,'&gt;') + "”.\n\n(Connect your backend here to return real AI responses.)";
        addBubble('AI', reply.replace(/\n/g,'<br/>'));
      }, 400);
    }

    sendBtn.addEventListener('click', send);
    ta.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' && !e.shiftKey){
        e.preventDefault(); send();
      }
    });

    // Keep messages scrolled to bottom on load
    scrollToBottom();
  </script>
</body>
</html>
