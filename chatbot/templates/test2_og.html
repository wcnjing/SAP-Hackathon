i have this code below, how do i implement the code in the image?

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SAP-style Chat UI + Sessions</title>

<style>
  :root{
    --bg: #eef3fa;
    --panel: #ffffff;
    --brand: #0a6ed1;
    --muted: #8993a5;
    --line: #e3e8f0;
    --chat-bg: #dfe8f6;
    --ai: #ffffff;
    --user: #f7fafc;
    --shadow: 0 10px 30px rgba(20, 30, 60, .08);
    --radius-lg: 14px;
    --sidebar-w: 300px;
    --sidebar-w-compact: 76px;
    --composer-h: 160px;
  }

  html,
  body{
    height: 100%;
  }

  body{
    margin: 0;
    font: 15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    color: #1f2937;
    background: var(--bg);
    overflow: hidden;
  }

  /* Responsive full-viewport frame (fixes clipping on smaller screens) */
  .frame{
    width: 100vw;
    height: 100vh;
    background: var(--panel);
    box-shadow: var(--shadow);
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr;
    transition: grid-template-columns .28s ease;
  }

  .frame.compact{
    grid-template-columns: var(--sidebar-w-compact) 1fr;
  }

  /* Sidebar */
  .sidebar{
    background: #ffffff;
    border-right: 1px solid var(--line);
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 18px 16px;
  }

  .brand{
    display: flex;
    align-items: center;
    justify-content: space-between;   /* pushes logo to the right edge */
    gap: 12px;
  }

  .brand-logo{
    height: 20px;                      /* tweak 18–24px as you like */
    width: auto;
    display: block;
    flex: 0 0 auto;                    /* prevent shrinking */
    object-fit: contain;
  }

  .hamburger{
    width: 38px;
    height: 38px;
    border-radius: 10px;
    border: 1px solid var(--line);
    display: grid;
    place-items: center;
    background: #ffffff;
    cursor: pointer;
  }

  .hamburger svg{
    width: 18px;
    height: 18px;
  }

  .search{
    display: flex;
    align-items: center;
    gap: 10px;
    background: #f6f7fb;
    border: 1px solid var(--line);
    border-radius: 10px;
    padding: 10px 12px;
  }

  .search input{
    border: 0;
    outline: 0;
    background: transparent;
    width: 100%;
  }

  .section-title{
    color: var(--muted);
    font-weight: 600;
    font-size: 12px;
    margin: 2px 2px 4px;
    text-transform: uppercase;
    letter-spacing: .04em;
  }

  .newchat{
    display: flex;
    align-items: center;
    gap: 10px;
    border: 1px dashed #c8d4e6;
    background: #f9fbff;
    border-radius: 12px;
    padding: 10px 12px;
    cursor: pointer;
  }

  .newchat:hover{
    background: #f3f7ff;
  }

  .history{
    display: flex;
    flex-direction: column;
    gap: 10px;
    overflow: auto;
    min-height: 0;
  }

  .history .item{
    appearance: none;
    -webkit-appearance: none;
  }

  .history .item:hover{
    box-shadow: var(--shadow);
  }

  .history .item .title{
    font-weight: 600;
  }

  .history .item .sub{
    color: var(--muted);
    font-size: 12px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .history .item.active{
    outline: none;
    border-color: var(--line);
    background: #fff;
  }

  .settings{
    margin-top: auto;
    display: flex;
    gap: 10px;
    align-items: center;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid var(--line);
    background: #ffffff;
    cursor: pointer;
  }

  /* Chat side */
  .chat{
    background: var(--chat-bg);
    display: flex;
    flex-direction: column;
    position: relative;
  }

  .messages{
    padding: 26px clamp(12px, 2vw, 28px) 160px;
    overflow: auto;
    flex: 1 1 auto;
    min-height: 0;
  }

  .bubble{
    max-width: min(780px, calc(100% - 2 * clamp(12px, 2vw, 28px)));
    background: var(--ai);
    border: 1px solid rgba(0, 0, 0, .06);
    border-radius: 16px;
    padding: 14px 16px;
    margin: 12px 0;
    box-shadow: 0 1px 0 rgba(0, 0, 0, .03);
  }

  .bubble.user{
    margin-left: auto;
    background: var(--user);
  }

  .bubble .meta{
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 6px;
    color: var(--muted);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: .02em;
  }

  .bubble .meta .role{
    color: #334155;
  }

  .composer{
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 16px 26px 26px;
    background: linear-gradient(180deg, rgba(223, 232, 246, 0) 0%, rgba(223, 232, 246, .7) 40%, rgba(223, 232, 246, 1) 100%);
    display: flex;
    justify-content: center;
  }

  .composer .inner{
    background: #ffffff;
    border: 1px solid var(--line);
    border-radius: 16px;
    width: min(1200px, 92%);
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    box-shadow: var(--shadow);
  }

  .iconbtn{
    width: 40px;
    height: 40px;
    border-radius: 10px;
    border: 1px solid var(--line);
    display: grid;
    place-items: center;
    background: #ffffff;
    cursor: pointer;
    flex: 0 0 auto;
  }

  .input{
    flex: 1 1 auto;
    min-width: 0;
  }

  .input textarea{
    width: 100%;
    max-height: 140px;
    min-height: 28px;
    height: 28px;
    resize: none;
    border: 0;
    outline: 0;
    font: inherit;
    line-height: 1.35;
    padding: 8px 2px;
  }

  .send{
    background: var(--brand);
    color: #ffffff;
    border-color: transparent;
  }

  .send:hover{
    filter: brightness(.96);
  }

  .kbd{
    background: #f1f5f9;
    border: 1px solid var(--line);
    padding: 2px 6px;
    border-radius: 8px;
    color: var(--muted);
    font-size: 12px;
  }

  /* Scrollbar */
  *::-webkit-scrollbar{
    width: 10px;
    height: 10px;
  }

  *::-webkit-scrollbar-thumb{
    background: #c8d4e6;
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: content-box;
  }

  *{
    scrollbar-color: #c8d4e6 transparent;
  }

  /* ===== Collapsed sidebar: show ONLY the hamburger ===== */
  .frame.compact .sidebar{
    padding: 18px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 0;
  }

  .frame.compact .sidebar > :not(.brand){
    display: none !important;
  }

  .frame.compact .brand{
    width: 100%;
    display: flex;
    justify-content: center;
  }

  .frame.compact .brand-logo{
    display: none !important;
  }

  .frame.compact .hamburger{
    width: 44px;
    height: 44px;
    margin: 0;
    display: grid;
    place-items: center;
  }

  .frame.compact .sidebar *,
  .frame.compact .hamburger{
    max-width: none !important;
  }

  .history .item{
    position: relative;        /* <— critical */
    padding: 12px 14px;
    padding-right: 48px;       /* <— space for trash button */
    border-radius: 12px;
    border: 1px solid var(--line);
    background: #ffffff;

    /* your “no outline” tweaks retained */
    appearance: none;
    -webkit-appearance: none;
    outline: none;
    }

    /* Optional: subtler active style (keeps a left blue bar) */
    .history .item.active{
    outline: none;
    background: #fff;
    border-color: #dfe6f2;
    box-shadow: inset 3px 0 0 #c7d1db;
    }

    /* Delete button */
    .history .item .del{
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 28px;
    height: 28px;
    border-radius: 8px;
    border: 1px solid var(--line);
    background: #ffffff;
    display: none;             /* show on hover/focus */
    place-items: center;
    cursor: pointer;
    z-index: 2;                /* sits above row content */
    pointer-events: auto;
    }

    .history .item:hover .del,
    .history .item:focus-within .del{
    display: grid;
    }

    .history .item:focus{
      outline: none;
      }
      .history .item:focus-visible{
      box-shadow: none;
      }

      .history .item .del svg{
      width: 14px;
      height: 14px;
      pointer-events: none;
      }

      /* allow the right pane to shrink properly inside the grid */
  .chat{
    min-height: 0;
  }

  /* use the dynamic padding instead of a fixed number */
  .messages{
    padding-bottom: calc(var(--composer-h) + 12px);
    scrollbar-gutter: stable both-edges;
  }

  /* make message text wrap even for very long words/URLs */
  .bubble > div:last-child{
    white-space: pre-wrap;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

</style>
</head>

<body>
  <div class="frame" id="frame">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <button class="hamburger" id="toggle" title="Collapse/Expand">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        </button>

        <img src="/chatbot/images/saplogo.png" alt="Brand" class="brand-logo">
      </div>

      <!-- NEW CHAT BUTTON -->
      <button class="newchat" id="newChatBtn" title="Start a new chat">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        <span class="text-hide">New Chat</span>
      </button>

      <div class="section-title">History</div>
      <div class="history" id="historyList"></div>

      <div class="settings" title="Settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2">
          <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"/>
          <path d="M19.4 15a1.7 1.7 0 0 0 .34 1.88l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06A1.7 1.7 0 0 0 15 19.4a1.7 1.7 0 0 0-1 .6l-.06.06a2 2 0 1 1-3 0l-.06-.06a1.7 1.7 0 0 0-1-.6 1.7 1.7 0 0 0-1.88-.34l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.7 1.7 0 0 0 4.6 15a1.7 1.7 0 0 0-.6-1l-.06-.06a2 2 0 1 1 0-3l.06-.06a1.7 1.7 0 0 0 .6-1 1.7 1.7 0 0 0-.34-1.88l-.06-.06A2 2 0 1 1 6.93 3.1l.06.06A1.7 1.7 0 0 0 8 3.6a1.7 1.7 0 0 0 1-.6l.06-.06a2 2 0 1 1 3 0l.06.06a1.7 1.7 0 0 0 1 .6 1.7 1.7 0 0 0 1.88.34l.06-.06A2 2 0 1 1 20.9 6.93l-.06.06a1.7 1.7 0 0 0-.6 1 1.7 1.7 0 0 0 .34 1.88l.06.06a2 2 0 1 1 0 3l-.06.06a1.7 1.7 0 0 0-.6 1Z"/>
        </svg>
        <span class="text-hide">Settings</span>
      </div>
    </aside>

    <!-- Chat -->
    <main class="chat">
      
      <div class="messages" id="messages"></div>

      <div class="composer">
        <div class="inner">
          <button class="iconbtn" title="Attach">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15.5V7a5 5 0 0 0-10 0v10a3 3 0 1 0 6 0V8"/>
            </svg>
          </button>

          <div class="input">
            <textarea id="input" placeholder="Ask me anything"></textarea>
          </div>

          <button class="iconbtn send" id="send" title="Send (Enter)">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13"/>
              <path d="M22 2l-7 20-4-9-9-4 20-7Z"/>
            </svg>
          </button>
        </div>
      </div>
    </main>
  </div>

<script>
  // ---------- Utilities ----------
  const $ = (sel, el = document) => el.querySelector(sel);
  const $$ = (sel, el = document) => [...el.querySelectorAll(sel)];
  const escapeHtml = (s = '') => s.replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
  const uuid = () => (crypto.randomUUID ? crypto.randomUUID() : (Math.random().toString(36).slice(2) + Date.now()));
  const composerEl = document.querySelector('.composer');

  // ---------- Storage ----------
  const STORAGE_KEY = 'chat_sessions_v1';
  const loadSessions = () => JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  const saveSessions = (arr) => localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));

  // ---------- State ----------
  let sessions = loadSessions();
  let currentId = null;

  // Seed first session on first load
  if (sessions.length === 0) {
    const id = uuid();
    sessions = [{
      id,
      title: 'Welcome',
      createdAt: Date.now(),
      updatedAt: Date.now(),
      messages: [
        { role: 'ai',  text: 'Hello! Ask me anything. This mock UI includes a collapsible sidebar, a scrollable chat canvas, and a composer dock below.' },
        { role: 'you', text: 'How do I download Python?' },
        { role: 'ai',  text: 'Visit python.org → Downloads, grab the installer for your OS, then follow the prompts (on Windows, tick “Add python.exe to PATH”).' }
      ]
    }];
    currentId = id;
    saveSessions(sessions);
  } else {
    currentId = sessions[0].id;
  }

  // ---------- Rendering ----------
  const messagesEl = $('#messages');
  const historyEl  = $('#historyList');

  function getSnippet(session){
    const last = session.messages[session.messages.length - 1];
    return last ? (last.text || '').replace(/\s+/g, ' ').slice(0, 80) : '';
  }

  function renderHistory(){
    historyEl.innerHTML = '';
    sessions.forEach((s, i) => {
        const row = document.createElement('div');
        row.className = 'item' + (s.id === currentId ? ' active' : '');
        row.setAttribute('role', 'button');
        row.setAttribute('tabindex', '0');
        row.innerHTML = `
        <div class="title">${escapeHtml(s.title)}</div>
        <div class="sub">${escapeHtml(getSnippet(s))}</div>
        <button class="del" title="Delete chat" aria-label="Delete chat">
            <svg viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2">
            <path d="M3 6h18"/>
            <path d="M8 6v-2a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
            <path d="M10 11v6M14 11v6"/>
            </svg>
        </button>
        `;

        // open chat
        row.addEventListener('click', () => {
        currentId = s.id;
        renderHistory();
        renderMessages();
        });

        // keyboard open
        row.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            row.click();
        }
        });

        // delete (stop row click)
        row.querySelector('.del').addEventListener('click', (e) => {
        e.stopPropagation();
        deleteChat(s.id);
        });

        historyEl.appendChild(row);
    });
    }


  function renderMessages(){
    messagesEl.innerHTML = '';
    const s = sessions.find(x => x.id === currentId);
    if (!s) return;
    s.messages.forEach(m => appendBubble(m.role === 'you' ? 'You' : 'AI', m.text));
    scrollToBottom();
  }

  function appendBubble(role, text){
    const div = document.createElement('div');
    div.className = 'bubble' + (role === 'You' ? ' user' : '');
    div.innerHTML = `<div class="meta"><span class="role">${role}</span></div><div>${escapeHtml(text).replace(/\n/g,'<br/>')}</div>`;
    messagesEl.appendChild(div);
  }

  function scrollToBottom(){
    messagesEl.scrollTop = messagesEl.scrollHeight;
  }

  // ---------- Composer / Sending ----------
  const ta = $('#input');
  const sendBtn = $('#send');

  function autogrow(el){
    el.style.height = '28px';
    el.style.height = Math.min(el.scrollHeight, 140) + 'px';
  }
  ta.addEventListener('input', () => autogrow(ta));

  function addTyping(){
    const d = document.createElement('div');
    d.className = 'bubble';
    d.dataset.typing = '1';
    d.innerHTML = `<div class="meta"><span class="role">AI</span></div><div>Typing…</div>`;
    messagesEl.appendChild(d);
    scrollToBottom();
    return d;
  }

  function send(){
    const text = ta.value.trim();
    if (!text) return;

    const s = sessions.find(x => x.id === currentId);
    s.messages.push({ role: 'you', text });
    if (s.title === 'New Chat' || s.title === 'Welcome') {
      s.title = text.slice(0, 28);
    }
    s.updatedAt = Date.now();
    saveSessions(sessions);

    appendBubble('You', text);
    ta.value = '';
    autogrow(ta);
    renderHistory();

    const typing = addTyping();

    // Fake AI reply — replace with your backend call
    setTimeout(() => {
      typing.remove();
      const reply = `You said: “${text}”.\n\n(Connect your backend to return real AI responses.)`;
      s.messages.push({ role: 'ai', text: reply });
      s.updatedAt = Date.now();
      saveSessions(sessions);
      appendBubble('AI', reply);
      renderHistory();
    }, 400);
  }

  sendBtn.addEventListener('click', send);
  ta.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      send();
    }
  });

  // ---------- New chat ----------
  $('#newChatBtn').addEventListener('click', () => {
    const id = uuid();
    sessions.unshift({
      id,
      title: 'New Chat',
      createdAt: Date.now(),
      updatedAt: Date.now(),
      messages: []
    });
    currentId = id;
    saveSessions(sessions);
    renderHistory();
    messagesEl.innerHTML = '';
    ta.focus();
  });

  function deleteChat(id){
    const idx = sessions.findIndex(s => s.id === id);
    if (idx === -1) return;

    if (!confirm('Delete this chat? This cannot be undone.')) {
        return;
    }

    // Choose the next chat to show if we're deleting the current one
    let nextId = currentId;
    if (currentId === id) {
        if (sessions[idx + 1]) {
        nextId = sessions[idx + 1].id;
        } else if (sessions[idx - 1]) {
        nextId = sessions[idx - 1].id;
        } else {
        nextId = null;
        }
    }

    // Remove it
    sessions.splice(idx, 1);

    // If nothing left, create a fresh empty chat
    if (sessions.length === 0) {
        const idNew = uuid();
        sessions = [{
        id: idNew,
        title: 'New Chat',
        createdAt: Date.now(),
        updatedAt: Date.now(),
        messages: []
        }];
        nextId = idNew;
    }

    currentId = nextId;
    saveSessions(sessions);
    renderHistory();
    renderMessages();
    }

    function updateComposerPadding(){
      // read current composer height and push into the CSS var
      const h = composerEl.getBoundingClientRect().height;
      document.documentElement.style.setProperty('--composer-h', `${h}px`);
    }

    function updateLayoutAndKeepBottom(){
      updateComposerPadding();
      // keep the view pinned to bottom when things change
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }



      // ---------- Collapse toggle ----------
      $('#toggle').addEventListener('click', () => {
        $('#frame').classList.toggle('compact');
      });

  // Initial render
  renderHistory();
  renderMessages();
  updateLayoutAndKeepBottom();

  // when the textarea grows
  ta.addEventListener('input', () => {
    autogrow(ta);
    updateLayoutAndKeepBottom();
  });

  // after sending (right after you append the user bubble)
  appendBubble('You', text);
  updateLayoutAndKeepBottom();

  // after AI reply (inside your setTimeout or fetch .then)
  appendBubble('AI', reply);
  updateLayoutAndKeepBottom();

  // when window size or zoom changes
  window.addEventListener('resize', updateLayoutAndKeepBottom);

  // if you toggle the sidebar width
  document.getElementById('toggle').addEventListener('click', () => {
    document.getElementById('frame').classList.toggle('compact');
    requestAnimationFrame(updateLayoutAndKeepBottom);
  });
</script>
</body>
</html>